(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[718],{873:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/channels/new",function(){return n(2740)}])},2588:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var a=n(5893),s=n(1664),l=n.n(s),r=n(1163);let i=[{href:"/app/dashboard",label:"Dashboard"},{href:"/app/channels",label:"Channels"},{href:"/app/settings",label:"Settings"}];function c(e){let{title:t,children:n}=e,s=(0,r.useRouter)();return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 text-slate-900 flex",children:[(0,a.jsxs)("aside",{className:"w-60 border-r border-slate-200 bg-white flex flex-col",children:[(0,a.jsx)("div",{className:"px-5 py-4 border-b border-slate-200",children:(0,a.jsxs)(l(),{href:"/",className:"text-lg font-bold tracking-tight",children:["subs",(0,a.jsx)("span",{className:"text-indigo-600",children:".saas"})]})}),(0,a.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-1",children:i.map(e=>{let t=s.pathname.startsWith(e.href);return(0,a.jsx)(l(),{href:e.href,className:"block px-3 py-2 rounded-lg text-sm ".concat(t?"bg-indigo-50 text-indigo-700 font-medium":"text-slate-600 hover:bg-slate-100"),children:e.label},e.href)})}),(0,a.jsxs)("div",{className:"px-4 py-4 border-t border-slate-200 text-xs text-slate-500",children:[(0,a.jsx)("div",{children:"Logged in as"}),(0,a.jsx)("div",{className:"font-medium",children:"Creator"})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsxs)("header",{className:"h-14 border-b border-slate-200 bg-white flex items-center justify-between px-6",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-slate-700",children:t||"Dashboard"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm text-slate-600",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"fanstero.netlify.app"}),(0,a.jsx)("span",{className:"w-8 h-8 rounded-full bg-indigo-500 text-white flex items-center justify-center text-xs font-semibold",children:"CR"})]})]}),(0,a.jsx)("main",{className:"flex-1 px-6 py-6",children:n})]})]})}},2740:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(5893),s=n(2588),l=n(1163),r=n(7294);let i="https://subs-saas.onrender.com/api/v1";function c(){let e=(0,l.useRouter)(),[t,n]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null),[d,h]=(0,r.useState)(null),x=localStorage.getItem("token"),u=async()=>{if(!x)return alert("Missing auth token."),null;let e=await fetch("".concat(i,"/projects/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)},body:JSON.stringify({title:"New Private Channel",active:!0})});return e.ok?(await e.json()).id:(console.error(await e.text()),alert("Failed to create project."),null)},m=async e=>{let t=await fetch("".concat(i,"/projects/").concat(e,"/connect-link"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)}});return t.ok?(await t.json()).bot_link:(console.error(await t.text()),alert("Failed to get Telegram connect link."),null)},p=async e=>{var t;let n=await fetch("".concat(i,"/projects/").concat(e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)}});return n.ok&&(null===(t=(await n.json()).settings)||void 0===t?void 0:t.status)||null},b=t=>{let n=setInterval(async()=>{let a=await p(t);h(a),"connected"===a&&(clearInterval(n),e.push("/app/channels"))},3e3);return()=>clearInterval(n)},f=async()=>{n(!0);let e=await u();if(!e){n(!1);return}o(e);let t=await m(e);if(!t){n(!1);return}window.open(t,"_blank"),b(e)};return(0,a.jsx)(s.Z,{title:"Connect your private channel",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"Connect your private channel"}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:"We will use our Telegram bot to securely connect your private channel. Just add the bot as an admin — we detect the rest automatically."}),(0,a.jsxs)("div",{className:"bg-white shadow-sm rounded-2xl border border-slate-200 p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-slate-800 mb-2",children:"How it works"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside text-sm text-slate-600 space-y-1",children:[(0,a.jsx)("li",{children:"Click the button below to open the bot."}),(0,a.jsx)("li",{children:"Add the bot as an admin to your private channel."}),(0,a.jsx)("li",{children:"Return here — we will automatically detect when your channel is connected."})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{type:"button",onClick:f,disabled:t,className:"block w-full text-center bg-indigo-600 text-white py-3 rounded-xl font-medium hover:bg-indigo-700 transition-colors",children:t?"Connecting...":"Open Telegram and connect channel"}),c&&(0,a.jsxs)("p",{className:"text-center text-sm text-slate-600",children:["Waiting for your channel to be connected…",(0,a.jsx)("br",{}),"Status:"," ",(0,a.jsx)("span",{className:"font-medium",children:d||"pending"})]})]})]})]})})}},1163:function(e,t,n){e.exports=n(9090)}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=873)}),_N_E=e.O()}]);