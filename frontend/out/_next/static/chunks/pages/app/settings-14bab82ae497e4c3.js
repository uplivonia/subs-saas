(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[877],{494:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/settings",function(){return a(7423)}])},2588:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(5893),l=a(1664),r=a.n(l),n=a(1163);let o=[{href:"/app/dashboard",label:"Dashboard"},{href:"/app/channels",label:"Channels"},{href:"/app/settings",label:"Settings"}];function i(e){let{title:t,children:a}=e,l=(0,n.useRouter)();return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50 text-slate-900 flex",children:[(0,s.jsxs)("aside",{className:"w-60 border-r border-slate-200 bg-white flex flex-col",children:[(0,s.jsx)("div",{className:"px-5 py-4 border-b border-slate-200",children:(0,s.jsxs)(r(),{href:"/",className:"text-lg font-bold tracking-tight",children:["subs",(0,s.jsx)("span",{className:"text-indigo-600",children:".saas"})]})}),(0,s.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-1",children:o.map(e=>{let t=l.pathname.startsWith(e.href);return(0,s.jsx)(r(),{href:e.href,className:"block px-3 py-2 rounded-lg text-sm ".concat(t?"bg-indigo-50 text-indigo-700 font-medium":"text-slate-600 hover:bg-slate-100"),children:e.label},e.href)})}),(0,s.jsxs)("div",{className:"px-4 py-4 border-t border-slate-200 text-xs text-slate-500",children:[(0,s.jsx)("div",{children:"Logged in as"}),(0,s.jsx)("div",{className:"font-medium",children:"Creator"})]})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsxs)("header",{className:"h-14 border-b border-slate-200 bg-white flex items-center justify-between px-6",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700",children:t||"Dashboard"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm text-slate-600",children:[(0,s.jsx)("span",{className:"hidden sm:inline",children:"fanstero.netlify.app"}),(0,s.jsx)("span",{className:"w-8 h-8 rounded-full bg-indigo-500 text-white flex items-center justify-center text-xs font-semibold",children:"CR"})]})]}),(0,s.jsx)("main",{className:"flex-1 px-6 py-6",children:a})]})]})}},7423:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var s=a(5893),l=a(2588),r=a(7294);let n="https://subs-saas.onrender.com/api/v1";function o(){var e;let[t,a]=(0,r.useState)(!0),[o,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),[m,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),y=async()=>{let e=localStorage.getItem("token");if(!e){x(null),a(!1);return}try{let t=await fetch("".concat(n,"/payments/me/summary"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok){console.error("Failed to load summary:",await t.text()),x(null),a(!1);return}let s=await t.json();x(s),h(s.payout_method||""),f(s.payout_details||"")}catch(e){console.error("Network error while loading summary:",e),x(null)}finally{a(!1)}};(0,r.useEffect)(()=>{y()},[]);let b=async()=>{let e=localStorage.getItem("token");if(!e){alert("Please log in first.");return}if(!m.trim()||!p.trim()){alert("Please fill payout method and details.");return}i(!0);try{let t=await fetch("".concat(n,"/payments/me/payout-settings"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({payout_method:m,payout_details:p})});if(!t.ok){let e=await t.text();console.error("Failed to save payout settings:",e),alert("Could not save payout settings. Try again.");return}alert("Payout settings saved."),await y()}catch(e){console.error("Network error while saving payout settings:",e),alert("Network error. Try again.")}finally{i(!1)}},g=async()=>{let e=localStorage.getItem("token");if(!e){alert("Please log in first.");return}if(!u){alert("Balance is not loaded yet.");return}if(u.balance<=0){alert("You have no funds to withdraw.");return}if(!m.trim()||!p.trim()){alert("Please set payout method and details before requesting payout.");return}if(confirm("Request payout of your full available balance?")){c(!0);try{let t=await fetch("".concat(n,"/payments/me/payout-request"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({})}),a=await t.text();if(!t.ok){console.error("Failed to request payout:",a);try{let e=JSON.parse(a);alert(e.detail||"Could not request payout.")}catch(e){alert("Could not request payout.")}return}alert("Payout request created. We will process it soon."),await y()}catch(e){console.error("Network error while requesting payout:",e),alert("Network error. Try again.")}finally{c(!1)}}},N=null!==(e=null==u?void 0:u.balance)&&void 0!==e?e:0;return(0,s.jsx)(l.Z,{title:"Settings",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"Settings"}),(0,s.jsxs)("div",{className:"bg-white shadow-sm rounded-2xl border border-slate-200 p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-slate-800 mb-1",children:"Creator balance"}),t?(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Loading your balance..."}):(0,s.jsxs)("p",{className:"text-3xl font-semibold text-slate-900",children:["EUR ",N.toFixed(2)]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"You receive 90% of each successful subscription payment. Our platform fee is 10%."})]}),(0,s.jsxs)("div",{className:"border-t border-slate-200 pt-4",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-slate-800 mb-2",children:"Payout details"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mb-3",children:"Add how we should pay you: IBAN (SEPA), Revolut, Wise or crypto address. We will use these details when processing your payout requests."}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Payout method"}),(0,s.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"Example: SEPA IBAN, Revolut, Wise, USDT TRC20",className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Payout details"}),(0,s.jsx)("textarea",{value:p,onChange:e=>f(e.target.value),placeholder:"Example: IBAN LT12 3456 ..., or Revolut @username, or USDT TRC20 wallet...",className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm min-h-[90px] focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-4",children:[(0,s.jsx)("button",{type:"button",onClick:b,disabled:o,className:"inline-flex items-center px-4 py-2 rounded-xl text-sm font-medium ".concat(o?"bg-slate-200 text-slate-500 cursor-wait":"bg-indigo-600 text-white hover:bg-indigo-700"),children:o?"Saving...":"Save payout settings"}),(0,s.jsx)("button",{type:"button",onClick:g,disabled:d||t||N<=0,className:"inline-flex items-center px-4 py-2 rounded-xl text-sm font-medium border ".concat(d||t||N<=0?"border-slate-200 text-slate-400 cursor-not-allowed":"border-emerald-500 text-emerald-600 hover:bg-emerald-50"),children:d?"Requesting...":"Request payout"})]}),(0,s.jsx)("p",{className:"text-[11px] text-slate-400 mt-2",children:"Minimum payout amount is 20 EUR. We usually process payout requests within a few days."})]})]})]})})}},1163:function(e,t,a){e.exports=a(9090)}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=494)}),_N_E=e.O()}]);